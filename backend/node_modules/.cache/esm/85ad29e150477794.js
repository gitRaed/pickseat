"use strict";;let getUserData,updateDbUser,deleteDbUser,authDbEmail,statusDb,encrypt,decrypt;_504‍.x([["getUser",()=>getUser],["updateUser",()=>updateUser],["deleteUser",()=>deleteUser],["authCode",()=>authCode],["banCode",()=>banCode],["suspendCode",()=>suspendCode],["normalCode",()=>normalCode]]);_504‍.w("../dataAccessLayer/requete_data.mjs",[["getUserData",["getUserData"],function(v){getUserData=v}],["updateDbUser",["updateDbUser"],function(v){updateDbUser=v}],["deleteDbUser",["deleteDbUser"],function(v){deleteDbUser=v}],["authDbEmail",["authDbEmail"],function(v){authDbEmail=v}],["statusDb",["statusDb"],function(v){statusDb=v}]]);_504‍.w("./crypter.mjs",[["encrypt",["encrypt"],function(v){encrypt=v}],["decrypt",["decrypt"],function(v){decrypt=v}]]);














       function getUser() {

    return getUserData().then((result) => {
        
        for(let i = 0, n = result.length; i < n; i++) {
            result[i].motDePasse = 'null';
        }
        return result;
    });
}

       function updateUser(id, nom, prenom, email, numero, typeUser) {


    return updateDbUser(id, nom, prenom, email, numero, typeUser);
}

       function deleteUser(id) {

    return deleteDbUser(id);
}

       function authCode(email, motDePasse) {

    let data = {
        auth : false,
        nom: '',
        prenom: ''
    };

    // check le mot de passe et l'email
    return getUserData().then( (result) => {

        for (let i = 0, n  = result.length; i < n && !data.auth; i++) {

            result[i].motDePasse = decrypt(result[i].motDePasse);

            if(result[i].email === email && result[i].motDePasse === motDePasse) {
                data.auth = true;
                data.nom = result[i].nom;
                data.prenom = result[i].prenom;
            }
                
        }
        return data;
    });
}

       function banCode(id) {

    let status_compte = "Banni";

    return statusDb(id, status_compte);
}

       function suspendCode(id) {

    let status_compte = "Suspendu";

    return statusDb(id, status_compte);
}

       function normalCode(id) {

    let status_compte = "Actif";

    return statusDb(id, status_compte);
}