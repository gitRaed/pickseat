"use strict";;let sql;_fc5‍.x([["getUserData",()=>getUserData],["banDb",()=>banDb],["updateDbUser",()=>updateDbUser],["deleteDbUser",()=>deleteDbUser],["authDb",()=>authDb]]);_fc5‍.w("mssql",[["default",["sql"],function(v){sql=v}]]);


var config = {
    user: 'sa',
    password: 'raed',
    server: 'localhost',
    database: 'pickseat',
    "options": {
        "encrypt": true,
        "enableArithAbort": true
    },
};

       async function getUserData() {

    try {
        const pool = await new sql.ConnectionPool(config).connect();
        const result = await pool.request().query('SELECT * FROM utilisateurs');
        return result.recordset;
    } catch (error) {
        _fc5‍.g.console.log('requete_getData, erreur : ' + error);
    }

}

       async function banDb(id, status_compte) {

    try {
        const pool = await new sql.ConnectionPool(config).connect();
        await pool.request()
                    .input('id', id)
                    .input('status_compte', status_compte)
                    .query('UPDATE utilisateurs SET status_compte = @status_compte WHERE id_utilisateur = @id');
    } catch (error) {
        _fc5‍.g.console.log('banDb : ' + error);
    }
}

       async function updateDbUser(id, nom, prenom, email, numero, typeUser, motDePasse) {

    try {
        const pool = await new sql.ConnectionPool(config).connect();
        await pool.request()
            .input('id', id)
            .input('nom', nom)
            .input('prenom', prenom)
            .input('email', email)
            .input('numero', numero)
            .input('typeUser', typeUser)
            .input('motDePasse', motDePasse)
            .query('UPDATE utilisateurs set nom = @nom, prenom = @prenom, email = @email, numero = @numero, typeUser = @typeUser, motDePasse = @motDePasse WHERE id_utilisateur = @id');
    } catch (error) {
        _fc5‍.g.console.log('Requete-register, erreur : ' + error);
    }
}

       async function deleteDbUser(id) {

    try {
        const pool = await new sql.ConnectionPool(config).connect();
        await pool.request()
            .input('id', id)
            .query('DELETE utilisateurs WHERE id_utilisateur = @id');
    } catch (error) {
        _fc5‍.g.console.log('Delete user db : ' + error);
    }
}

       async function authDb(email) {
    
    try {
        const pool = await new sql.ConnectionPool(config).connect();
        const result = await pool.request()
            .input('email', email)
            .query('SELECT * FROM utilisateurs WHERE email = @email');
            return result.recordset;
    } catch (error) {
        _fc5‍.g.console.log('Requete-register, erreur : ' + error);
    }
}